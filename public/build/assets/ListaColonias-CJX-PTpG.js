import{_ as Q,a as U}from"./AuthenticatedLayout-BDHjc7je.js";import{o as p,c as h,d as o,n as B,r as v,t as l,T as q,k as r,a as t,u,w as i,F as Z,Z as W,b as c,y as G,z as J}from"./app-CLfzQwBL.js";import{_ as A,a as j,D as X}from"./SecondaryButton-CsmPNdWT.js";import{_ as E}from"./PrimaryButton-DoS-Ov7d.js";import{_ as Y}from"./AlertSuccess-Dz-dxDne.js";import{_ as oo}from"./DarkButton-BeJ4YREK.js";import{_ as D}from"./SelectGroup-DOjRGmZF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-mAnpCHuh.js";const eo={class:"flex items-center"},so={class:"ml-2 text-gray-800 font-bold"},ao={__name:"AlertWarning",props:["classMsg","Msg","ViewMore","HRefViewMore","classIcon"],setup(f){return(s,n)=>(p(),h("div",{class:B(["flex items-center justify-between p-2 pl-4 pr-4 mb-2 text-sm font-semibold text-gray-600 bg-orange-200 rounded-lg shadow-md focus:outline-none focus:shadow-outline-purple",f.classMsg]),href:"{{ HRefViewMore }}"},[o("div",eo,[o("span",{class:B(f.classIcon)},[v(s.$slots,"default")],2),o("span",so,l(f.Msg),1)]),o("span",null,l(f.ViewMore),1)],2))}},to={class:"p-4 bg-white rounded-lg shadow-xs"},io={class:"inline-flex overflow-hidden mb-4 w-full bg-white rounded-lg shadow-md"},lo={class:"px-4 py-2 -mx-3"},no={class:"mx-3"},ro=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z","clip-rule":"evenodd"})],-1),co=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),uo={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},fo={class:"overflow-x-auto w-full"},go={class:"w-full whitespace-no-wrap"},_o=o("thead",null,[o("tr",{class:"text-xs font-bold tracking-wide text-left text-blue-500 uppercase bg-gray-300 border-b"},[o("th",{class:"px-4 py-3"},"ID"),o("th",{class:"px-4 py-3"},"Número"),o("th",{class:"px-4 py-3"},"Refugio"),o("th",{class:"px-4 py-3"},"Ubicación"),o("th",{class:"px-4 py-3"},"Infraestructra"),o("th",{class:"px-4 py-3"},"Capacidad"),o("th",{class:"px-4 py-3"},"Enlace"),o("th",{class:"px-4 py-3"},"Teléfonos"),o("th",{class:"px-4 py-3"})])],-1),mo={class:"bg-white divide-y"},po={class:"px-4 py-3 text-sm"},ho={class:"px-4 py-3 text-sm"},vo={class:"px-4 py-3 text-sm"},xo={class:"px-4 py-3 text-sm"},wo={class:"px-4 py-3 text-xs"},yo={class:"px-4 py-3 text-sm"},bo={class:"px-4 py-3 text-sm"},Co={class:"px-4 py-3 text-xs"},Mo={class:"px-4 py-3 text-sm"},ko=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),$o=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),jo={class:"p-6"},Eo={class:"text-2x1 font-medium text-orange-700"},Ro={class:"text-2x1 font-medium text-purple-800"},zo={class:"m-6 flex justify-end"},Vo={class:"p-6"},Bo=o("br",null,null,-1),Zo=o("br",null,null,-1),Ao={class:"text-2x1 font-medium text-orange-700"},Do={class:"text-2x1 font-medium text-purple-800"},Ho={class:"m-6 flex justify-end"},Qo={__name:"ListaColonias",props:{Colonias:{type:Object},Refugios:{type:Object},flash:{type:Object}},setup(f){const s=q({id:0,refugio_id:0,numero:0,latitud:0,longitud:0,activado:0,refugiocolonia_id:0,zona:"",refugioruta_id:0,ruta:"",colonia1_id:0,colonia1:"",colonia_id:0,colonia:"",comunidad_id:0,comunidad:"",tipocomunidad_id:0,tipocomunidad:0,nuevo_refugio_id:0,nuevo_refugio:""}),n=f,R=r([]),z=r([]);r([]),r([]);let x=r([]),w=r([]),y=r([]);n.Colonias.map(e=>R.value.push({id:e.id,text:e.colonia+" "+e.comunidad+" "+e.id})),n.Refugios.map(e=>z.value.push({id:e.id,text:e.refugio+" ("+e.numero+")"}));const b=r(!1),_=r(n.flash.success!=null?n.flash.success:""),C=r(n.flash.success!=null?"":"hidden"),m=r("hidden");r(),r();const M=r(!1),H=e=>{m.value="hidden",x.value=[],s.id=e.target.value,console.log(s.id),V()},V=async()=>{console.log(s.id);try{const e=await J.post("getRefugiosFromColoniasAuth",s).then(d=>{console.log("Datos recibidos:",d.data.refugios.original.mensaje),d.data.refugios.original.mensaje==="OK"?(x.value=d.data.refugios.original,console.log("Colonia recibida:",d.data.colonia.colonia),w.value=d.data.colonia,N(w.value)):m.value="block"}).catch(d=>{console.log("Error:",d.message)})}catch(e){console.error("Error al obtener los datos: ",e.message)}},N=e=>{s.id=e.id,s.numero=e.numero,s.colonia1=e.colonia1,s.colonia1_id=e.colonia1_id,s.colonia=e.colonia,s.colonia_id=e.colonia_id,s.activado=e.activado,s.comunidad=e.comunidad,s.comunidad_id=e.comunidad_id,s.tipocomunidad=e.tipocomunidad,s.tipocomunidad_id=e.tipocomunidad_id,s.refugio_id=e.refugio_id,s.refugiocolonia_id=e.refugiocolonia_id,s.refugioruta_id=e.refugioruta_id,s.ruta=e.ruta,s.zona=e.zona,s.latitud=e.latitud,s.longitud=e.longitud},S=async e=>{m.value="hidden",y.nuevo_refugio_id=e.target.value,y.nuevo_refugio=e.target.text,s.nuevo_refugio_id=e.target.value,s.nuevo_refugio=y.nuevo_refugio,console.log(s.nuevo_refugio_id+"_"+s.colonia_id)},I=e=>{s.refugio_id=e.id,s.numero=e.numero,s.refugio=e.refugio,b.value=!0},L=e=>{M.value=!0},k=()=>{b.value=!1},$=()=>{M.value=!1},O=()=>{console.log(s.refugio_id+" "+s.id),s.post(route("coloniarefugio.destroy",s),{onSuccess:()=>{n.flash.mensaje==="OK"?g(n.flash.success):g(n.flash.error)},onError:()=>{g(n.flash.error)}})},F=()=>{console.log(s.nuevo_refugio_id+" "+s.id),s.post(route("coloniarefugio.add",s),{onSuccess:()=>{n.flash.mensaje==="OK"?g(n.flash.success):g(n.flash.error)},onError:()=>{g(n.flash.error)}})},g=e=>{k(),$(),_.value=e,console.log(_.value),C.value="block bg-warning-800",setTimeout(()=>{C.value="hidden",_.value="",V()},4200)},T=e=>{window.open("/refugios-getPosition.php?id="+e.id)};var K="Colonias";return(e,d)=>(p(),h(Z,null,[t(u(W),{title:"Colonias"}),t(Q,null,{header:i(()=>[c(l(u(K)),1)]),default:i(()=>[o("div",to,[o("div",io,[o("div",lo,[o("div",no,[t(D,{opciones:R.value,onChange:d[0]||(d[0]=a=>H(a)),errors:u(s).errors.colonia_id,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"])])]),t(E,{onClick:d[1]||(d[1]=a=>L(u(s))),title:"Agregar refugio",type:"default","class-btn":"px-3 py-2 mt-3 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-emerald-600 border border-transparent rounded-lg active:bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:shadow-outline-emerald"},{default:i(()=>[v(e.$slots,"icon",{},()=>[ro])]),_:3})]),t(Y,{classMsg:C.value,Msg:_.value,classIcon:"text-green-800"},{default:i(()=>[v(e.$slots,"icon",{},()=>[co])]),_:3},8,["classMsg","Msg"]),o("div",uo,[o("div",fo,[o("table",go,[_o,o("tbody",mo,[(p(!0),h(Z,null,G(u(x).data,a=>(p(),h("tr",{key:a.id,class:"text-gray-700"},[o("td",po,l(a.id),1),o("td",ho,[t(U,{href:e.route("refugio.edit",a.id)},{default:i(()=>[t(j,{title:"Editar refugio"},{default:i(()=>[c(l(a.numero),1)]),_:2},1024)]),_:2},1032,["href"])]),o("td",vo,[t(oo,{onClick:P=>T(a),title:"Cambiar la geolocalización"},{default:i(()=>[c(l(a.refugio),1)]),_:2},1032,["onClick"])]),o("td",xo,l(a.ubicacion),1),o("td",wo,l(a.infraestructura),1),o("td",yo,l(a.capacidad),1),o("td",bo,l(a.enlace),1),o("td",Co,l(a.telefonos),1),o("td",Mo,[t(X,{onClick:P=>I(a),title:"Eliminar refugio"},{default:i(()=>[ko]),_:2},1032,["onClick"])])]))),128))])]),t(ao,{classMsg:m.value,Msg:"No se encontraron Refugios",classIcon:"text-orange-800"},{default:i(()=>[v(e.$slots,"icon",{},()=>[$o])]),_:3},8,["classMsg"])])])]),t(A,{show:b.value,onClose:k},{default:i(()=>[o("div",jo,[o("p",null,[c(" ¿Quiéres quitar "),o("span",Eo,l(u(w).colonia),1),c(" del refugio "),o("span",Ro,l(u(s).refugio),1),c(" ? ")])]),o("div",zo,[t(E,{onClick:O,class:"mr-4"},{default:i(()=>[c("Si, elimínalo")]),_:1}),t(j,{onClick:k},{default:i(()=>[c("Cancelar")]),_:1})])]),_:1},8,["show"]),t(A,{show:M.value,onClose:$},{default:i(()=>[o("div",Vo,[t(D,{opciones:z.value,onChange:d[2]||(d[2]=a=>S(a)),errors:u(s).errors.refugio,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"]),Bo,Zo,o("p",null,[c(" ¿Quiéres agregar el refugio "),o("span",Ao,l(u(s).nuevo_refugio),1),c(" a la colonia "),o("span",Do,l(u(s).colonia),1),c(" ? ")])]),o("div",Ho,[t(E,{onClick:F,class:"mr-4"},{default:i(()=>[c("Agregar")]),_:1}),t(j,{onClick:$},{default:i(()=>[c("Cancelar")]),_:1})])]),_:1},8,["show"])]),_:3})],64))}};export{Qo as default};
