import{_ as P,a as Q}from"./AuthenticatedLayout-BYJ1IV39.js";import{o as h,c as v,d as o,n as R,r as x,t as i,k as c,T as U,a as t,u,w as l,F as V,Z as q,b as r,y as W,z as G}from"./app-DLAS_AYn.js";import{_ as Z,a as E,D as J}from"./SecondaryButton-CZTU0KQq.js";import{_ as z}from"./PrimaryButton-ByVoZV-B.js";import{_ as X}from"./AlertSuccess-CAI51LfX.js";import{_ as Y}from"./DarkButton-DtlR0eNn.js";import{_ as A}from"./SelectGroup-ChtYE_8v.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-tG_RMX46.js";const oo={class:"flex items-center"},eo={class:"ml-2 text-gray-800 font-bold"},so={__name:"AlertWarning",props:["classMsg","Msg","ViewMore","HRefViewMore","classIcon"],setup(f){return(_,w)=>(h(),v("div",{class:R(["flex items-center justify-between p-2 pl-4 pr-4 mb-2 text-sm font-semibold text-gray-600 bg-orange-200 rounded-lg shadow-md focus:outline-none focus:shadow-outline-purple",f.classMsg]),href:"{{ HRefViewMore }}"},[o("div",oo,[o("span",{class:R(f.classIcon)},[x(_.$slots,"default")],2),o("span",eo,i(f.Msg),1)]),o("span",null,i(f.ViewMore),1)],2))}},ao={class:"p-4 bg-white rounded-lg shadow-xs"},to={class:"inline-flex overflow-hidden mb-4 w-full bg-white rounded-lg shadow-md"},lo={class:"px-4 py-2 -mx-3"},io={class:"mx-3"},no=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z","clip-rule":"evenodd"})],-1),ro=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),co={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},uo={class:"overflow-x-auto w-full"},fo={class:"w-full whitespace-no-wrap"},go=o("thead",null,[o("tr",{class:"text-xs font-bold tracking-wide text-left text-blue-500 uppercase bg-gray-300 border-b"},[o("th",{class:"px-4 py-3"},"ID"),o("th",{class:"px-4 py-3"},"Número"),o("th",{class:"px-4 py-3"},"Refugio"),o("th",{class:"px-4 py-3"},"Ubicación"),o("th",{class:"px-4 py-3"},"Infraestructra"),o("th",{class:"px-4 py-3"},"Capacidad"),o("th",{class:"px-4 py-3"},"Enlace"),o("th",{class:"px-4 py-3"},"Teléfonos"),o("th",{class:"px-4 py-3"})])],-1),_o={class:"bg-white divide-y"},mo={class:"px-4 py-3 text-sm"},po={class:"px-4 py-3 text-sm"},ho={class:"px-4 py-3 text-sm"},vo={class:"px-4 py-3 text-sm"},xo={class:"px-4 py-3 text-xs"},wo={class:"px-4 py-3 text-sm"},bo={class:"px-4 py-3 text-sm"},yo={class:"px-4 py-3 text-xs"},Co={class:"px-4 py-3 text-sm"},Mo=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),ko=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),$o={class:"p-6"},jo={class:"text-2x1 font-medium text-orange-700"},Eo={class:"text-2x1 font-medium text-purple-800"},zo={class:"m-6 flex justify-end"},Bo={class:"p-6"},Ro=o("br",null,null,-1),Vo=o("br",null,null,-1),Zo={class:"text-2x1 font-medium text-orange-700"},Ao={class:"text-2x1 font-medium text-purple-800"},Do={class:"m-6 flex justify-end"},Po={__name:"ListaColonias",props:{Colonias:{type:Object},Refugios:{type:Object},flash:{type:Object}},setup(f){const _=c([]),w=c([]);c([]),c([]);let b=c([]),y=c([]);const d=f,s=U({id:0,refugio_id:0,numero:0,latitud:0,longitud:0,activado:0,refugiocolonia_id:0,zona:"",refugioruta_id:0,ruta:"",colonia1_id:0,colonia1:"",colonia_id:0,colonia:"",comunidad_id:0,comunidad:"",tipocomunidad_id:0,tipocomunidad:0,nuevo_refugio_id:0,nuevo_refugio:""});d.Colonias.map(e=>_.value.push({id:e.id,text:e.colonia+" "+e.comunidad+" "+e.id})),d.Refugios.map(e=>w.value.push({id:e.id,text:e.refugio+" ("+e.numero+")"}));const C=c(!1),M=c(!1),k=c(d.flash.success!=null?"":"hidden"),m=c("hidden"),p=c(d.flash.success!=null?d.flash.success:""),D=e=>{m.value="hidden",b.value=[],s.id=e.target.value,console.log(s.id),B()},B=async()=>{console.log(s.id);try{const e=await G.post("getRefugiosFromColoniasAuth",s).then(n=>{console.log("Datos recibidos:",n.data.refugios.original.mensaje),n.data.refugios.original.mensaje==="OK"?(b.value=n.data.refugios.original,console.log("Colonia recibida:",n.data.colonia.colonia),y.value=n.data.colonia,H(y.value)):m.value="block"}).catch(n=>{console.log("Error:",n.message)})}catch(e){console.error("Error al obtener los datos: ",e.message)}},H=e=>{s.id=e.id,s.numero=e.numero,s.colonia1=e.colonia1,s.colonia1_id=e.colonia1_id,s.colonia=e.colonia,s.colonia_id=e.colonia_id,s.activado=e.activado,s.comunidad=e.comunidad,s.comunidad_id=e.comunidad_id,s.tipocomunidad=e.tipocomunidad,s.tipocomunidad_id=e.tipocomunidad_id,s.refugio_id=e.refugio_id,s.refugiocolonia_id=e.refugiocolonia_id,s.refugioruta_id=e.refugioruta_id,s.ruta=e.ruta,s.zona=e.zona,s.latitud=e.latitud,s.longitud=e.longitud},S=async e=>{m.value="hidden",s.nuevo_refugio_id=e.target.value,s.nuevo_refugio=e.target.text,console.log(s.nuevo_refugio_id+"_"+s.colonia_id)},I=e=>{s.refugio_id=e.id,C.value=!0},L=e=>{M.value=!0},$=()=>{C.value=!1},j=()=>{M.value=!1},N=()=>{console.log(s.refugio_id+" "+s.id),s.post(route("coloniarefugio.destroy",s),{onSuccess:()=>{d.flash.mensaje==="OK"?g(d.flash.success):g(d.flash.error)},onError:()=>{g(d.flash.error)}})},O=()=>{console.log(s.nuevo_refugio_id+" "+s.id),s.post(route("coloniarefugio.add",s),{onSuccess:()=>{d.flash.mensaje==="OK"?g(d.flash.success):g(d.flash.error)},onError:()=>{g(d.flash.error)}})},g=e=>{$(),j(),p.value=e,console.log(p.value),k.value="block bg-warning-800",setTimeout(()=>{k.value="hidden",p.value="",B()},3e3)},F=e=>{window.open("/refugios-getPosition.php?id="+e.id)};var T="Colonias";return(e,n)=>(h(),v(V,null,[t(u(q),{title:"Colonias"}),t(P,null,{header:l(()=>[r(i(u(T)),1)]),default:l(()=>[o("div",ao,[o("div",to,[o("div",lo,[o("div",io,[t(A,{opciones:_.value,onChange:n[0]||(n[0]=a=>D(a)),errors:u(s).errors.colonia_id,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"])])]),t(z,{onClick:n[1]||(n[1]=a=>L(u(s))),title:"Agregar refugio",type:"default",classBtn:"px-3 py-2 mt-3 text-sm font-medium leading-5 text-white transition-colors duration-150 rojo-morena border border-transparent rounded-lg active:bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:shadow-outline-emerald"},{default:l(()=>[x(e.$slots,"icon",{},()=>[no])]),_:3})]),t(X,{classMsg:k.value,Msg:p.value,classIcon:"text-green-800"},{default:l(()=>[x(e.$slots,"icon",{},()=>[ro])]),_:3},8,["classMsg","Msg"]),o("div",co,[o("div",uo,[o("table",fo,[go,o("tbody",_o,[(h(!0),v(V,null,W(u(b).data,a=>(h(),v("tr",{key:a.id,class:"text-gray-700"},[o("td",mo,i(a.id),1),o("td",po,[t(Q,{href:e.route("refugio.edit",a.id)},{default:l(()=>[t(E,{title:"Editar refugio"},{default:l(()=>[r(i(a.numero),1)]),_:2},1024)]),_:2},1032,["href"])]),o("td",ho,[t(Y,{onClick:K=>F(a),title:"Cambiar la geolocalización"},{default:l(()=>[r(i(a.refugio),1)]),_:2},1032,["onClick"])]),o("td",vo,i(a.ubicacion),1),o("td",xo,i(a.infraestructura),1),o("td",wo,i(a.capacidad),1),o("td",bo,i(a.enlace),1),o("td",yo,i(a.telefonos),1),o("td",Co,[t(J,{onClick:K=>I(a),title:"Eliminar refugio"},{default:l(()=>[Mo]),_:2},1032,["onClick"])])]))),128))])]),t(so,{classMsg:m.value,Msg:"No se encontraron Refugios",classIcon:"text-orange-800"},{default:l(()=>[x(e.$slots,"icon",{},()=>[ko])]),_:3},8,["classMsg"])])])]),t(Z,{show:C.value,onClose:$},{default:l(()=>[o("div",$o,[o("p",null,[r(" ¿Quiéres quitar "),o("span",jo,i(u(y).colonia),1),r(" del refugio "),o("span",Eo,i(u(s).refugio),1),r(" ? ")])]),o("div",zo,[t(z,{onClick:N,class:"mr-4","class-btn":"rojo-morena"},{default:l(()=>[r("Si, elimínalo")]),_:1}),t(E,{onClick:$},{default:l(()=>[r("Cancelar")]),_:1})])]),_:1},8,["show"]),t(Z,{show:M.value,onClose:j},{default:l(()=>[o("div",Bo,[t(A,{opciones:w.value,onChange:n[2]||(n[2]=a=>S(a)),errors:u(s).errors.refugio,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"]),Ro,Vo,o("p",null,[r(" ¿Quiéres agregar el refugio "),o("span",Zo,i(u(s).nuevo_refugio),1),r(" a la colonia "),o("span",Ao,i(u(s).colonia),1),r(" ? ")])]),o("div",Do,[t(z,{onClick:O,class:"mr-4","class-btn":"rojo-morena"},{default:l(()=>[r("Agregar")]),_:1}),t(E,{onClick:j},{default:l(()=>[r("Cancelar")]),_:1})])]),_:1},8,["show"])]),_:3})],64))}};export{Po as default};
