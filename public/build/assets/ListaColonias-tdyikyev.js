import{_ as Q,a as U}from"./AuthenticatedLayout-XBSAr9ig.js";import{o as h,c as v,d as o,n as B,r as x,t as i,T as q,k as d,a as t,u,w as l,F as Z,Z as W,b as r,y as G,z as J}from"./app-DOMLPwSj.js";import{_ as A,a as $,D as X}from"./SecondaryButton-B9NSkaAZ.js";import{_ as j}from"./PrimaryButton-CrLjZvsC.js";import{_ as Y}from"./AlertSuccess-CT3QpjE9.js";import{_ as oo}from"./DarkButton-WwtusWHP.js";import{_ as D}from"./SelectGroup-Cvi1AEJh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-DT3ox7jI.js";const eo={class:"flex items-center"},so={class:"ml-2 text-gray-800 font-bold"},ao={__name:"AlertWarning",props:["classMsg","Msg","ViewMore","HRefViewMore","classIcon"],setup(f){return(s,n)=>(h(),v("div",{class:B(["flex items-center justify-between p-2 pl-4 pr-4 mb-2 text-sm font-semibold text-gray-600 bg-orange-200 rounded-lg shadow-md focus:outline-none focus:shadow-outline-purple",f.classMsg]),href:"{{ HRefViewMore }}"},[o("div",eo,[o("span",{class:B(f.classIcon)},[x(s.$slots,"default")],2),o("span",so,i(f.Msg),1)]),o("span",null,i(f.ViewMore),1)],2))}},to={class:"p-4 bg-white rounded-lg shadow-xs"},lo={class:"inline-flex overflow-hidden mb-4 w-full bg-white rounded-lg shadow-md"},io={class:"px-4 py-2 -mx-3"},no={class:"mx-3"},co=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z","clip-rule":"evenodd"})],-1),ro=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),uo={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},fo={class:"overflow-x-auto w-full"},go={class:"w-full whitespace-no-wrap"},_o=o("thead",null,[o("tr",{class:"text-xs font-bold tracking-wide text-left text-blue-500 uppercase bg-gray-300 border-b"},[o("th",{class:"px-4 py-3"},"ID"),o("th",{class:"px-4 py-3"},"Número"),o("th",{class:"px-4 py-3"},"Refugio"),o("th",{class:"px-4 py-3"},"Ubicación"),o("th",{class:"px-4 py-3"},"Infraestructra"),o("th",{class:"px-4 py-3"},"Capacidad"),o("th",{class:"px-4 py-3"},"Enlace"),o("th",{class:"px-4 py-3"},"Teléfonos"),o("th",{class:"px-4 py-3"})])],-1),mo={class:"bg-white divide-y"},po={class:"px-4 py-3 text-sm"},ho={class:"px-4 py-3 text-sm"},vo={class:"px-4 py-3 text-sm"},xo={class:"px-4 py-3 text-sm"},wo={class:"px-4 py-3 text-xs"},yo={class:"px-4 py-3 text-sm"},bo={class:"px-4 py-3 text-sm"},Co={class:"px-4 py-3 text-xs"},Mo={class:"px-4 py-3 text-sm"},ko=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),$o=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),jo={class:"p-6"},Eo={class:"text-2x1 font-medium text-orange-700"},Ro={class:"text-2x1 font-medium text-purple-800"},zo={class:"m-6 flex justify-end"},Vo={class:"p-6"},Bo=o("br",null,null,-1),Zo=o("br",null,null,-1),Ao={class:"text-2x1 font-medium text-orange-700"},Do={class:"text-2x1 font-medium text-purple-800"},Ho={class:"m-6 flex justify-end"},Qo={__name:"ListaColonias",props:{Colonias:{type:Object},Refugios:{type:Object},flash:{type:Object}},setup(f){const s=q({id:0,refugio_id:0,numero:0,latitud:0,longitud:0,activado:0,refugiocolonia_id:0,zona:"",refugioruta_id:0,ruta:"",colonia1_id:0,colonia1:"",colonia_id:0,colonia:"",comunidad_id:0,comunidad:"",tipocomunidad_id:0,tipocomunidad:0,nuevo_refugio_id:0}),n=f,E=d([]),R=d([]);d([]),d([]);let w=d([]),_=d([]),z=d(0);n.Colonias.map(e=>E.value.push({id:e.colonia_id,text:e.colonia+" "+e.comunidad+" "+e.colonia_id})),n.Refugios.map(e=>R.value.push({id:e.id,text:e.refugio+" ("+e.numero+")"}));const y=d(!1),m=d(n.flash.success!=null?n.flash.success:""),b=d(n.flash.success!=null?"":"hidden"),p=d("hidden");d(),d();const C=d(!1),H=e=>{p.value="hidden",w.value=[],s.colonia_id=e.target.value,console.log(s.colonia_id),V()},V=async()=>{console.log(s.colonia_id);try{const e=await J.post("getRefugiosFromColoniasAuth",s).then(c=>{console.log("Datos recibidos:",c.data.refugios.original.mensaje),c.data.refugios.original.mensaje==="OK"?(w.value=c.data.refugios.original,console.log("Colonia recibida:",c.data.colonia.colonia1),_.value=c.data.colonia,S(_.value)):p.value="block"}).catch(c=>{console.log("Error:",c.message)})}catch(e){console.error("Error al obtener los datos: ",e.message)}},S=e=>{s.id=e.id,s.numero=e.numero,s.colonia1=e.colonia1,s.colonia1_id=e.colonia1_id,s.colonia=e.colonia,s.colonia_id=e.colonia_id,s.activado=e.activado,s.comunidad=e.comunidad,s.comunidad_id=e.comunidad_id,s.tipocomunidad=e.tipocomunidad,s.tipocomunidad_id=e.tipocomunidad_id,s.refugio_id=e.refugio_id,s.refugiocolonia_id=e.refugiocolonia_id,s.refugioruta_id=e.refugioruta_id,s.ruta=e.ruta,s.zona=e.zona,s.latitud=e.latitud,s.longitud=e.longitud},I=async e=>{p.value="hidden",z.value=e.target.value,s.nuevo_refugio_id=z.value,console.log(s.nuevo_refugio_id)},L=e=>{s.id=e.id,s.numero=e.numero,s.refugio=e.refugio,y.value=!0},N=e=>{s.id=e.id,s.numero=e.numero,s.refugio=e.refugio,C.value=!0},M=()=>{y.value=!1},k=()=>{C.value=!1},O=()=>{console.log(s.numero+" "+s.colonia_id),s.post(route("coloniarefugio.destroy",s),{onSuccess:()=>{n.flash.mensaje==="OK"?g(n.flash.success):g(n.flash.error)},onError:()=>{g(n.flash.error)}})},F=()=>{console.log(s.nuevo_refugio_id+" "+s.colonia_id),s.post(route("coloniarefugio.add",s),{onSuccess:()=>{n.flash.mensaje==="OK"?g(n.flash.success):g(n.flash.error)},onError:()=>{g(n.flash.error)}})},g=e=>{M(),k(),m.value=e,console.log(m.value),b.value="block bg-warning-800",setTimeout(()=>{b.value="hidden",m.value="",V()},4200)},T=e=>{window.open("/refugios-getPosition.php?id="+e.id)};var K="Colonias";return(e,c)=>(h(),v(Z,null,[t(u(W),{title:"Colonias"}),t(Q,null,{header:l(()=>[r(i(u(K)),1)]),default:l(()=>[o("div",to,[o("div",lo,[o("div",io,[o("div",no,[t(D,{opciones:E.value,onChange:c[0]||(c[0]=a=>H(a)),errors:u(s).errors.colonia_id,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"])])]),t(j,{onClick:c[1]||(c[1]=a=>N(u(s))),title:"Agregar refugio",type:"default","class-btn":"px-3 py-2 mt-3 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-emerald-600 border border-transparent rounded-lg active:bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:shadow-outline-emerald"},{default:l(()=>[x(e.$slots,"icon",{},()=>[co])]),_:3})]),t(Y,{classMsg:b.value,Msg:m.value,classIcon:"text-green-800"},{default:l(()=>[x(e.$slots,"icon",{},()=>[ro])]),_:3},8,["classMsg","Msg"]),o("div",uo,[o("div",fo,[o("table",go,[_o,o("tbody",mo,[(h(!0),v(Z,null,G(u(w).data,a=>(h(),v("tr",{key:a.id,class:"text-gray-700"},[o("td",po,i(a.id),1),o("td",ho,[t(U,{href:e.route("refugio.edit",a.id)},{default:l(()=>[t($,{title:"Editar refugio"},{default:l(()=>[r(i(a.numero),1)]),_:2},1024)]),_:2},1032,["href"])]),o("td",vo,[t(oo,{onClick:P=>T(a),title:"Cambiar la geolocalización"},{default:l(()=>[r(i(a.refugio),1)]),_:2},1032,["onClick"])]),o("td",xo,i(a.ubicacion),1),o("td",wo,i(a.infraestructura),1),o("td",yo,i(a.capacidad),1),o("td",bo,i(a.enlace),1),o("td",Co,i(a.telefonos),1),o("td",Mo,[t(X,{onClick:P=>L(a),title:"Eliminar refugio"},{default:l(()=>[ko]),_:2},1032,["onClick"])])]))),128))])]),t(ao,{classMsg:p.value,Msg:"No se encontraron Refugios",classIcon:"text-orange-800"},{default:l(()=>[x(e.$slots,"icon",{},()=>[$o])]),_:3},8,["classMsg"])])])]),t(A,{show:y.value,onClose:M},{default:l(()=>[o("div",jo,[o("p",null,[r(" ¿Quiéres quitar "),o("span",Eo,i(u(_).colonia),1),r(" del refugio "),o("span",Ro,i(u(s).refugio),1),r(" ? ")])]),o("div",zo,[t(j,{onClick:O,class:"mr-4"},{default:l(()=>[r("Si, elimínalo")]),_:1}),t($,{onClick:M},{default:l(()=>[r("Cancelar")]),_:1})])]),_:1},8,["show"]),t(A,{show:C.value,onClose:k},{default:l(()=>[o("div",Vo,[t(D,{opciones:R.value,onChange:c[2]||(c[2]=a=>I(a)),errors:u(s).errors.refugio,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"]),Bo,Zo,o("p",null,[r(" ¿Quiéres agregar "),o("span",Ao,i(u(s).nuevo_refugio_id),1),r(" a la colonia "),o("span",Do,i(u(_).colonia),1),r(" ? ")])]),o("div",Ho,[t(j,{onClick:F,class:"mr-4"},{default:l(()=>[r("Agregar")]),_:1}),t($,{onClick:k},{default:l(()=>[r("Cancelar")]),_:1})])]),_:1},8,["show"])]),_:3})],64))}};export{Qo as default};
