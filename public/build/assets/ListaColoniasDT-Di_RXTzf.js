import{_ as oo}from"./AuthenticatedLayout-COKFtPnh.js";import{s as eo,k as t,T as lo,m as ao,c as so,a as s,u as r,w as i,F as to,o as io,Z as no,b as d,t as p,d as a,r as v,q as ro,x as uo}from"./app-BuWHEnaa.js";import{_ as V,a as L}from"./Modal-CZK5Uuik.js";import{_ as b}from"./PrimaryButton-Bu-PBff2.js";import{_ as go}from"./AlertSuccess-B9TR9wdG.js";import{_ as N}from"./SelectGroup-GSNR2jGF.js";import{_ as fo}from"./AlertWarning-7QtOTzyG.js";import{_ as T}from"./AceptarButton-Cov9jPuP.js";import{D as A,P as E}from"./dataTables.responsive-YSWLf07y.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-DY0SectE.js";/*! Bootstrap 5 styling wrapper for Select
 * © SpryMedia Ltd - datatables.net/license
 */A.select.classes.checkbox="form-check-input";const co={class:"p-4 bg-white rounded-lg shadow-xs"},mo={class:"inline-flex overflow-hidden mb-4 w-full bg-white rounded-lg shadow-md"},po={class:"px-4 py-2 -mx-3"},vo={class:"mx-3"},wo={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},xo={class:"overflow-x-auto w-full"},ho={class:"p-6"},bo={class:"text-2x1 font-medium text-orange-700"},_o={class:"text-2x1 font-medium text-purple-800"},Co={class:"m-6 flex justify-end"},yo={class:"p-6"},Mo={class:"text-2x1 font-medium text-orange-700"},Ro={class:"text-2x1 font-medium text-purple-800"},ko={class:"m-6 flex justify-end"},Lo={__name:"ListaColoniasDT",props:{Colonias:{type:Object},Refugios:{type:Object},flash:{type:Object}},setup(z){eo(),E.use(A),E.use(A);const $=t([]),Z=t([]);let u=t([]),w=t([]);const n=z,l=lo({id:0,refugio_id:0,numero:0,latitud:0,longitud:0,activado:0,refugiocolonia_id:0,zona:"",refugioruta_id:0,ruta:"",colonia1_id:0,colonia1:"",colonia_id:0,colonia:"",comunidad_id:0,comunidad:"",tipocomunidad_id:0,tipocomunidad:0,nuevo_refugio_id:0,nuevo_refugio:""});n.Colonias.map(e=>$.value.push({id:e.id,text:e.colonia+" "+e.comunidad+" "+e.id})),n.Refugios.map(e=>Z.value.push({id:e.id,text:e.refugio+" ("+e.numero+")"}));const _=t(!1),C=t(!1),y=t(!1),m=t(!1),M=t(!1),R=t("hidden"),x=t("hidden"),h=t(n.flash.success!=null?n.flash.success:""),j=t();let D;const I=t([]),f=t(0);ao(function(){D=j.value.dt});const F=e=>{x.value="hidden",u.value=[],l.id=e.target.value,console.log(l.id),S()},S=async()=>{y.value=!1,m.value=!1,console.log(l.id),w.value=[];try{const e=await ro.post("getRefugiosFromColoniasAuth",l).then(o=>{console.log("Datos recibidos: ",o.data.refugios.original.mensaje),o.data.refugios.original.mensaje==="OK"?(u.value=o.data.refugios.original,console.log("Colonia recibida: ",o.data.colonia.colonia),w.value=o.data.colonia,U(w.value),y.value=!0):x.value="block"}).catch(o=>{console.log("Error:",o.message)})}catch(e){console.error("Error al obtener los datos: ",e.message)}},H=[{data:"id",title:"ID"},{data:"numero",title:"#"},{data:"refugio",title:"REFUGIO"},{data:"ubicacion",title:"UBICACION"},{data:"infraestructura",title:"INFRAESTRUCTURA"},{data:"capacidad",title:"CAPACIDAD"},{data:"enlace",title:"ENLACE"},{data:"telefonos",title:"TELEFONOS"}];let P={dom:"Bftip",language:{url:"https://cdn.datatables.net/plug-ins/1.13.6/i18n/es-MX.json"},buttons:["csv","excel","pdf","print"],responsive:!0,select:!0,processing:!0,paging:!0,lengthMenu:[[10,25,50,75,100,-1],["10","25","50","75","100","Todos"]],displayLength:10};const U=e=>{l.id=e.id,l.numero=e.numero,l.colonia1=e.colonia1,l.colonia1_id=e.colonia1_id,l.colonia=e.colonia,l.colonia_id=e.colonia_id,l.activado=e.activado,l.comunidad=e.comunidad,l.comunidad_id=e.comunidad_id,l.tipocomunidad=e.tipocomunidad,l.tipocomunidad_id=e.tipocomunidad_id,l.refugio_id=e.refugio_id,l.refugiocolonia_id=e.refugiocolonia_id,l.refugioruta_id=e.refugioruta_id,l.ruta=e.ruta,l.zona=e.zona,l.latitud=e.latitud,l.longitud=e.longitud},K=async e=>{x.value="hidden",e.target.options.selectedIndex>-1&&(l.nuevo_refugio_id=e.target.value,l.nuevo_refugio=e.target.options[e.target.options.selectedIndex].text,console.log(l.nuevo_refugio_id+"_"+l.colonia_id))},q=e=>{l.refugio_id=e,_.value=!0},Q=e=>{C.value=!0},k=()=>{_.value=!1},B=()=>{C.value=!1},G=()=>{console.log(l.refugio_id+" "+l.id),l.post(route("coloniarefugio.destroy",l),{onSuccess:()=>{n.flash.mensaje==="OK"?c(n.flash.success):c(n.flash.error)},onError:()=>{c(n.flash.error)}})},X=()=>{console.log(l.nuevo_refugio_id+" "+l.id),l.post(route("coloniarefugio.add",l),{onSuccess:()=>{n.flash.mensaje==="OK"?c(n.flash.success):c(n.flash.error)},onError:()=>{c(n.flash.error)}})};function O(){m.value=!1,M.value=!1,f.value=0,D.rows({selected:!0}).every(function(){let e=u.value.data.indexOf(this.data());e>=0&&(l.refugio_id=u.value.data[e].id,l.refugio=u.value.data[e].refugio,f.value=u.value.data[e].id,m.value=!0,M.value=uo("eliminar | all | sysop"),console.log(f.value+" - "+u.value.data[e].id," => ",u.value.data[e].refugio))})}const c=e=>{k(),B(),h.value=e,console.log(h.value),R.value="block bg-warning-800",setTimeout(()=>{R.value="hidden",h.value="",S()},3e3)},J=e=>{window.open("/refugio.edit/"+e)},W=e=>{window.open("/refugios-getPosition.php?id="+e)};var Y="Asignar Refugio a Colonia";return(e,o)=>(io(),so(to,null,[s(r(no),{title:"Colonias"}),s(oo,null,{header:i(()=>[d(p(r(Y)),1)]),default:i(()=>[a("div",co,[a("div",mo,[a("div",po,[a("div",vo,[s(N,{opciones:$.value,onChange:o[0]||(o[0]=g=>F(g)),errors:r(l).errors.colonia_id,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"])])]),s(b,{show:y.value,onClick:o[1]||(o[1]=g=>Q(r(l))),title:"Agregar refugio",type:"default",classBtn:"px-3 py-2 mt-3 text-sm font-medium leading-5 text-white transition-colors duration-150 rojo-morena border border-transparent rounded-lg active:bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:shadow-outline-emerald"},{default:i(()=>[v(e.$slots,"icon",{},()=>[o[7]||(o[7]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[a("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z","clip-rule":"evenodd"})],-1))])]),_:3},8,["show"]),s(b,{show:m.value,onClick:o[2]||(o[2]=g=>J(f.value)),title:"Editar refugio",type:"default",classBtn:"px-3 py-2 mt-3 ml-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-emerald-600 border border-transparent rounded-lg active:bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:shadow-outline-emerald"},{default:i(()=>[v(e.$slots,"icon",{},()=>[o[8]||(o[8]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[a("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),a("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"})],-1))])]),_:3},8,["show"]),s(b,{show:m.value,onClick:o[3]||(o[3]=g=>W(f.value)),title:"Editar ubicación",type:"default",classBtn:"px-3 py-2 ml-2 mt-3 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-orange-600 border border-transparent rounded-lg active:bg-orange-600 hover:bg-orange-700 focus:outline-none focus:shadow-outline-orange"},{default:i(()=>[v(e.$slots,"icon",{},()=>[o[9]||(o[9]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[a("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM6.262 6.072a8.25 8.25 0 1 0 10.562-.766 4.5 4.5 0 0 1-1.318 1.357L14.25 7.5l.165.33a.809.809 0 0 1-1.086 1.085l-.604-.302a1.125 1.125 0 0 0-1.298.21l-.132.131c-.439.44-.439 1.152 0 1.591l.296.296c.256.257.622.374.98.314l1.17-.195c.323-.054.654.036.905.245l1.33 1.108c.32.267.46.694.358 1.1a8.7 8.7 0 0 1-2.288 4.04l-.723.724a1.125 1.125 0 0 1-1.298.21l-.153-.076a1.125 1.125 0 0 1-.622-1.006v-1.089c0-.298-.119-.585-.33-.796l-1.347-1.347a1.125 1.125 0 0 1-.21-1.298L9.75 12l-1.64-1.64a6 6 0 0 1-1.676-3.257l-.172-1.03Z","clip-rule":"evenodd"})],-1))])]),_:3},8,["show"]),s(b,{show:M.value,onClick:o[4]||(o[4]=g=>q(f.value)),title:"Eliminar refugio","class-btn":"px-3 py-2 ml-3 mt-3 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-red-600 border border-transparent rounded-lg active:bg-red-600 hover:bg-red-700 focus:outline-none focus:shadow-outline-red"},{default:i(()=>o[10]||(o[10]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1)])),_:1},8,["show"])]),s(go,{classMsg:R.value,Msg:h.value,classIcon:"text-green-800"},{default:i(()=>[v(e.$slots,"icon",{},()=>[o[11]||(o[11]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[a("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1))])]),_:3},8,["classMsg","Msg"]),a("div",wo,[a("div",xo,[s(r(E),{data:r(u).data,columns:H,options:r(P),ref_key:"table",ref:j,onSelect:O,onDeselect:O,class:"table table-striped table-bordered table-hover w-full whitespace-no-wrap display"},{default:i(()=>o[12]||(o[12]=[a("thead",null,[a("tr",{class:"text-xs font-bold tracking-wide text-left text-blue-500 uppercase bg-gray-300 border-b"},[a("th",{class:"px-4 py-3"},"ID"),a("th",{class:"px-4 py-3"},"Número"),a("th",{class:"px-4 py-3"},"Refugio"),a("th",{class:"px-4 py-3"},"Ubicación"),a("th",{class:"px-4 py-3"},"Infraestructra"),a("th",{class:"px-4 py-3"},"Capacidad"),a("th",{class:"px-4 py-3"},"Enlace"),a("th",{class:"px-4 py-3"},"Teléfonos")])],-1)])),_:1},8,["data","options"]),s(fo,{classMsg:x.value,Msg:"No se encontraron Refugios",classIcon:"text-orange-800"},{default:i(()=>[v(e.$slots,"icon",{},()=>[o[13]||(o[13]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[a("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1))])]),_:3},8,["classMsg"])])])]),s(V,{show:_.value,onClose:k},{default:i(()=>[a("div",ho,[a("p",null,[o[14]||(o[14]=d(" ¿Quiéres quitar ")),a("span",bo,p(r(w).colonia),1),o[15]||(o[15]=d(" del refugio ")),a("span",_o,p(r(l).refugio),1),o[16]||(o[16]=d(" ? "))])]),a("div",Co,[s(T,{onClick:G},{default:i(()=>o[17]||(o[17]=[d("Si, elimínalo")])),_:1}),s(L,{onClick:k,class:"ml-4"},{default:i(()=>o[18]||(o[18]=[d("Cancelar")])),_:1})])]),_:1},8,["show"]),s(V,{show:C.value,onClose:B},{default:i(()=>[a("div",yo,[s(N,{opciones:Z.value,onChange:o[5]||(o[5]=g=>K(g)),errors:r(l).errors.refugio,"class-especial":"em25 bg-yellow-50",modelValue:I.value,"onUpdate:modelValue":o[6]||(o[6]=g=>I.value=g)},null,8,["opciones","errors","modelValue"]),o[22]||(o[22]=a("br",null,null,-1)),o[23]||(o[23]=a("br",null,null,-1)),a("p",null,[o[19]||(o[19]=d(" ¿Quiéres agregar el refugio ")),a("span",Mo,p(r(l).nuevo_refugio),1),o[20]||(o[20]=d(" a la colonia ")),a("span",Ro,p(r(l).colonia),1),o[21]||(o[21]=d(" ? "))])]),a("div",ko,[s(T,{onClick:X},{default:i(()=>o[24]||(o[24]=[d("Agregar")])),_:1}),s(L,{onClick:B,class:"ml-4"},{default:i(()=>o[25]||(o[25]=[d("Cancelar")])),_:1})])]),_:1},8,["show"])]),_:3})],64))}};export{Lo as default};
