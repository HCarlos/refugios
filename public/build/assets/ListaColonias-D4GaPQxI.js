import{_ as K,a as q}from"./AuthenticatedLayout-Kh0Z_ccT.js";import{k as c,T as P,c as b,a as t,u,w as i,F as Z,o as C,Z as Q,b as d,t as r,d as o,r as M,p as U,q as G}from"./app-ZHI9JMuZ.js";import{_ as z,a as k}from"./Modal-YHMpnetb.js";import{_ as $}from"./PrimaryButton-Ct5-wMUW.js";import{D as J}from"./DangerButton-CXIEeunt.js";import{_ as W}from"./AlertSuccess-mEDa8q3V.js";import{_ as X}from"./DarkButton-DgQK0Air.js";import{_ as R}from"./SelectGroup-CHKqvas_.js";import{_ as Y}from"./AlertWarning-Mtcy9HPA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-BLVYMVku.js";const oo={class:"p-4 bg-white rounded-lg shadow-xs"},eo={class:"inline-flex overflow-hidden mb-4 w-full bg-white rounded-lg shadow-md"},so={class:"px-4 py-2 -mx-3"},ao={class:"mx-3"},to=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z","clip-rule":"evenodd"})],-1),io=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),lo={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},no={class:"overflow-x-auto w-full"},ro={class:"w-full whitespace-no-wrap"},co=o("thead",null,[o("tr",{class:"text-xs font-bold tracking-wide text-left text-blue-500 uppercase bg-gray-300 border-b"},[o("th",{class:"px-4 py-3"},"ID"),o("th",{class:"px-4 py-3"},"Número"),o("th",{class:"px-4 py-3"},"Refugio"),o("th",{class:"px-4 py-3"},"Ubicación"),o("th",{class:"px-4 py-3"},"Infraestructra"),o("th",{class:"px-4 py-3"},"Capacidad"),o("th",{class:"px-4 py-3"},"Enlace"),o("th",{class:"px-4 py-3"},"Teléfonos"),o("th",{class:"px-4 py-3"})])],-1),uo={class:"bg-white divide-y"},_o={class:"px-4 py-3 text-sm"},fo={class:"px-4 py-3 text-sm"},go={class:"px-4 py-3 text-sm"},mo={class:"px-4 py-3 text-sm"},po={class:"px-4 py-3 text-xs"},ho={class:"px-4 py-3 text-sm"},vo={class:"px-4 py-3 text-sm"},xo={class:"px-4 py-3 text-xs"},wo={class:"px-4 py-3 text-sm"},yo=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),bo=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),Co={class:"p-6"},Mo={class:"text-2x1 font-medium text-orange-700"},ko={class:"text-2x1 font-medium text-purple-800"},$o={class:"m-6 flex justify-end"},jo={class:"p-6"},Eo=o("br",null,null,-1),Bo=o("br",null,null,-1),Zo={class:"text-2x1 font-medium text-orange-700"},zo={class:"text-2x1 font-medium text-purple-800"},Ro={class:"m-6 flex justify-end"},Ko={__name:"ListaColonias",props:{Colonias:{type:Object},Refugios:{type:Object},flash:{type:Object}},setup(A){const j=c([]),E=c([]);c([]),c([]);let m=c([]),p=c([]);const n=A,s=P({id:0,refugio_id:0,numero:0,latitud:0,longitud:0,activado:0,refugiocolonia_id:0,zona:"",refugioruta_id:0,ruta:"",colonia1_id:0,colonia1:"",colonia_id:0,colonia:"",comunidad_id:0,comunidad:"",tipocomunidad_id:0,tipocomunidad:0,nuevo_refugio_id:0,nuevo_refugio:""});n.Colonias.map(e=>j.value.push({id:e.id,text:e.colonia+" "+e.comunidad+" "+e.id})),n.Refugios.map(e=>E.value.push({id:e.id,text:e.refugio+" ("+e.numero+")"}));const h=c(!1),v=c(!1),x=c(n.flash.success!=null?"":"hidden"),f=c("hidden"),g=c(n.flash.success!=null?n.flash.success:""),D=e=>{f.value="hidden",m.value=[],s.id=e.target.value,console.log(s.id),B()},B=async()=>{console.log(s.id);try{const e=await G.post("getRefugiosFromColoniasAuth",s).then(l=>{console.log("Datos recibidos:",l.data.refugios.original.mensaje),l.data.refugios.original.mensaje==="OK"?(m.value=l.data.refugios.original,console.log("Colonia recibida:",l.data.colonia.colonia),p.value=l.data.colonia,S(p.value)):f.value="block"}).catch(l=>{console.log("Error:",l.message)})}catch(e){console.error("Error al obtener los datos: ",e.message)}},S=e=>{s.id=e.id,s.numero=e.numero,s.colonia1=e.colonia1,s.colonia1_id=e.colonia1_id,s.colonia=e.colonia,s.colonia_id=e.colonia_id,s.activado=e.activado,s.comunidad=e.comunidad,s.comunidad_id=e.comunidad_id,s.tipocomunidad=e.tipocomunidad,s.tipocomunidad_id=e.tipocomunidad_id,s.refugio_id=e.refugio_id,s.refugiocolonia_id=e.refugiocolonia_id,s.refugioruta_id=e.refugioruta_id,s.ruta=e.ruta,s.zona=e.zona,s.latitud=e.latitud,s.longitud=e.longitud},L=async e=>{f.value="hidden",s.nuevo_refugio_id=e.target.value,s.nuevo_refugio=e.target.text,console.log(s.nuevo_refugio_id+"_"+s.colonia_id)},N=e=>{s.refugio_id=e.id,h.value=!0},O=e=>{v.value=!0},w=()=>{h.value=!1},y=()=>{v.value=!1},V=()=>{console.log(s.refugio_id+" "+s.id),s.post(route("coloniarefugio.destroy",s),{onSuccess:()=>{n.flash.mensaje==="OK"?_(n.flash.success):_(n.flash.error)},onError:()=>{_(n.flash.error)}})},H=()=>{console.log(s.nuevo_refugio_id+" "+s.id),s.post(route("coloniarefugio.add",s),{onSuccess:()=>{n.flash.mensaje==="OK"?_(n.flash.success):_(n.flash.error)},onError:()=>{_(n.flash.error)}})},_=e=>{w(),y(),g.value=e,console.log(g.value),x.value="block bg-warning-800",setTimeout(()=>{x.value="hidden",g.value="",B()},3e3)},F=e=>{window.open("/refugios-getPosition.php?id="+e.id)};var I="Colonias";return(e,l)=>(C(),b(Z,null,[t(u(Q),{title:"Colonias"}),t(K,null,{header:i(()=>[d(r(u(I)),1)]),default:i(()=>[o("div",oo,[o("div",eo,[o("div",so,[o("div",ao,[t(R,{opciones:j.value,onChange:l[0]||(l[0]=a=>D(a)),errors:u(s).errors.colonia_id,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"])])]),t($,{onClick:l[1]||(l[1]=a=>O(u(s))),title:"Agregar refugio",type:"default",classBtn:"px-3 py-2 mt-3 text-sm font-medium leading-5 text-white transition-colors duration-150 rojo-morena border border-transparent rounded-lg active:bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:shadow-outline-emerald"},{default:i(()=>[M(e.$slots,"icon",{},()=>[to])]),_:3})]),t(W,{classMsg:x.value,Msg:g.value,classIcon:"text-green-800"},{default:i(()=>[M(e.$slots,"icon",{},()=>[io])]),_:3},8,["classMsg","Msg"]),o("div",lo,[o("div",no,[o("table",ro,[co,o("tbody",uo,[(C(!0),b(Z,null,U(u(m).data,a=>(C(),b("tr",{key:a.id,class:"text-gray-700"},[o("td",_o,r(a.id),1),o("td",fo,[t(q,{href:e.route("refugio.edit",a.id)},{default:i(()=>[t(k,{title:"Editar refugio"},{default:i(()=>[d(r(a.numero),1)]),_:2},1024)]),_:2},1032,["href"])]),o("td",go,[t(X,{onClick:T=>F(a),title:"Cambiar la geolocalización"},{default:i(()=>[d(r(a.refugio),1)]),_:2},1032,["onClick"])]),o("td",mo,r(a.ubicacion),1),o("td",po,r(a.infraestructura),1),o("td",ho,r(a.capacidad),1),o("td",vo,r(a.enlace),1),o("td",xo,r(a.telefonos),1),o("td",wo,[t(J,{onClick:T=>N(a),title:"Eliminar refugio"},{default:i(()=>[yo]),_:2},1032,["onClick"])])]))),128))])]),t(Y,{classMsg:f.value,Msg:"No se encontraron Refugios",classIcon:"text-orange-800"},{default:i(()=>[M(e.$slots,"icon",{},()=>[bo])]),_:3},8,["classMsg"])])])]),t(z,{show:h.value,onClose:w},{default:i(()=>[o("div",Co,[o("p",null,[d(" ¿Quiéres quitar "),o("span",Mo,r(u(p).colonia),1),d(" del refugio "),o("span",ko,r(u(s).refugio),1),d(" ? ")])]),o("div",$o,[t($,{onClick:V,class:"mr-4","class-btn":"rojo-morena"},{default:i(()=>[d("Si, elimínalo")]),_:1}),t(k,{onClick:w},{default:i(()=>[d("Cancelar")]),_:1})])]),_:1},8,["show"]),t(z,{show:v.value,onClose:y},{default:i(()=>[o("div",jo,[t(R,{opciones:E.value,onChange:l[2]||(l[2]=a=>L(a)),errors:u(s).errors.refugio,"class-especial":"em25 bg-yellow-50"},null,8,["opciones","errors"]),Eo,Bo,o("p",null,[d(" ¿Quiéres agregar el refugio "),o("span",Zo,r(u(s).nuevo_refugio),1),d(" a la colonia "),o("span",zo,r(u(s).colonia),1),d(" ? ")])]),o("div",Ro,[t($,{onClick:H,class:"mr-4","class-btn":"rojo-morena"},{default:i(()=>[d("Agregar")]),_:1}),t(k,{onClick:y},{default:i(()=>[d("Cancelar")]),_:1})])]),_:1},8,["show"])]),_:3})],64))}};export{Ko as default};
