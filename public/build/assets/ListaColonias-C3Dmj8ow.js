import{_ as I,a as L}from"./AuthenticatedLayout-PR1gWiuG.js";import{o as p,c as f,d as o,n as M,r as y,t,T as N,k as l,a as i,u,w as n,F as k,Z as S,b as c,y as T,z as A}from"./app-kdZz0Lum.js";import{_ as F,a as $,D as O}from"./SecondaryButton-CzHJYVOo.js";import{_ as P}from"./PrimaryButton-BwdrSIZ9.js";import{_ as R}from"./AlertSuccess-BkihRxIa.js";import{_ as U}from"./DarkButton-BSFVjLXu.js";import{_ as K}from"./SelectGroup-CL5wzZDd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-Ccw5JaKB.js";const Q={class:"flex items-center"},W={class:"ml-2 text-gray-800 font-bold"},q={__name:"AlertWarning",props:["classMsg","Msg","ViewMore","HRefViewMore","classIcon"],setup(d){return(e,r)=>(p(),f("div",{class:M(["flex items-center justify-between p-2 pl-4 pr-4 mb-2 text-sm font-semibold text-gray-600 bg-orange-200 rounded-lg shadow-md focus:outline-none focus:shadow-outline-purple",d.classMsg]),href:"{{ HRefViewMore }}"},[o("div",Q,[o("span",{class:M(d.classIcon)},[y(e.$slots,"default")],2),o("span",W,t(d.Msg),1)]),o("span",null,t(d.ViewMore),1)],2))}},G={class:"p-4 bg-white rounded-lg shadow-xs"},J={class:"inline-flex overflow-hidden mb-4 w-full bg-white rounded-lg shadow-md"},X={class:"px-4 py-2 -mx-3"},Y={class:"mx-3"},oo={class:"span"},so=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),eo={class:"overflow-hidden mb-8 w-full rounded-lg border shadow-xs"},ao={class:"overflow-x-auto w-full"},to={class:"w-full whitespace-no-wrap"},io=o("thead",null,[o("tr",{class:"text-xs font-bold tracking-wide text-left text-blue-500 uppercase bg-gray-300 border-b"},[o("th",{class:"px-4 py-3"},"ID"),o("th",{class:"px-4 py-3"},"Número"),o("th",{class:"px-4 py-3"},"Refugio"),o("th",{class:"px-4 py-3"},"Ubicación"),o("th",{class:"px-4 py-3"},"Infraestructra"),o("th",{class:"px-4 py-3"},"Capacidad"),o("th",{class:"px-4 py-3"},"Enlace"),o("th",{class:"px-4 py-3"},"Teléfonos"),o("th",{class:"px-4 py-3"})])],-1),lo={class:"bg-white divide-y"},no={class:"px-4 py-3 text-sm"},co={class:"px-4 py-3 text-sm"},ro={class:"px-4 py-3 text-sm"},uo={class:"px-4 py-3 text-sm"},_o={class:"px-4 py-3 text-xs"},mo={class:"px-4 py-3 text-sm"},po={class:"px-4 py-3 text-sm"},fo={class:"px-4 py-3 text-xs"},go={class:"px-4 py-3 text-sm"},ho=o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),xo=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[o("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})],-1),vo={class:"p-6"},wo={class:"text-2x1 font-medium text-gray-900"},yo={class:"m-6 flex justify-end"},Bo={__name:"ListaColonias",props:{Colonias:{type:Object},flash:{type:Object}},setup(d){const e=N({id:0,refugio_id:0,numero:0,latitud:0,longitud:0,activado:0,refugiocolonia_id:0,zona:"",refugioruta_id:0,ruta:"",colonia1_id:0,colonia1:"",colonia_id:0,colonia:"",comunidad_id:0,comunidad:"",tipocomunidad_id:0,tipocomunidad:0}),r=d,b=l([]);l([]),l([]);let g=l([]),C=l([]);r.Colonias.map(s=>b.value.push({id:s.colonia_id,text:s.colonia+" "+s.comunidad}));const h=l(!1),m=l(r.flash.success!=null?r.flash.success:""),x=l(r.flash.success!=null?"":"hidden"),v=l("hidden");l(),l();const z=async s=>{v.value="hidden",g.value=[],e.colonia_id=s.target.value,console.log(e.colonia_id);try{const _=await A.post("getRefugiosFromColoniasAuth",e).then(a=>{console.log("Datos recibidos:",a.data.refugios.original.mensaje),a.data.refugios.original.mensaje==="OK"?(g.value=a.data.refugios.original,console.log("Colonia recibida:",a.data.colonia.colonia1),C.value=a.data.colonia,E(C.value)):v.value="block"}).catch(a=>{console.log("Error:",a.message)})}catch(_){console.error("Error al obtener los datos: ",_.message)}},E=s=>{e.id=s.id,e.numero=s.numero,e.colonia1=s.colonia1,e.colonia1_id=s.colonia1_id,e.colonia=s.colonia,e.colonia_id=s.colonia_id,e.activado=s.activado,e.comunidad=s.comunidad,e.comunidad_id=s.comunidad_id,e.tipocomunidad=s.tipocomunidad,e.tipocomunidad_id=s.tipocomunidad_id,e.refugio_id=s.refugio_id,e.refugiocolonia_id=s.refugiocolonia_id,e.refugioruta_id=s.refugioruta_id,e.ruta=s.ruta,e.zona=s.zona,e.latitud=s.latitud,e.longitud=s.longitud},j=s=>{e.id=s.id,e.numero=s.numero,e.refugio=s.refugio,h.value=!0},w=()=>{h.value=!1},V=()=>{e.post(route("coloniarefugio.destroy",e),{onSuccess:()=>{B(r.flash.success)}})},B=s=>{w(),m.value=s,console.log(m.value),x.value="block",setTimeout(()=>{x.value="hidden",m.value=""},4200)},Z=s=>{window.open("/Refugios-getPosition.php?id="+s.id)};var D="Colonias";return(s,_)=>(p(),f(k,null,[i(u(S),{title:"Colonias"}),i(I,null,{header:n(()=>[c(t(u(D)),1)]),default:n(()=>[o("div",G,[o("div",J,[o("div",X,[o("div",Y,[i(K,{opciones:b.value,onChange:_[0]||(_[0]=a=>z(a)),errors:u(e).errors.colonia_id,"class-especial":"em15 bg-yellow-50"},null,8,["opciones","errors"]),o("span",oo,[c("Haz seleccionado la colonia "),o("small",null,t(u(e).colonia_id),1)])])])]),i(R,{classMsg:x.value,Msg:m.value,classIcon:"text-green-800"},{default:n(()=>[y(s.$slots,"icon",{},()=>[so])]),_:3},8,["classMsg","Msg"]),o("div",eo,[o("div",ao,[o("table",to,[io,o("tbody",lo,[(p(!0),f(k,null,T(u(g).data,a=>(p(),f("tr",{key:a.id,class:"text-gray-700"},[o("td",no,t(a.id),1),o("td",co,[i(L,{href:s.route("refugio.edit",a.id)},{default:n(()=>[i($,{title:"Editar refugio"},{default:n(()=>[c(t(a.numero),1)]),_:2},1024)]),_:2},1032,["href"])]),o("td",ro,[i(U,{onClick:H=>Z(a),title:"Cambiar la geolocalización"},{default:n(()=>[c(t(a.refugio),1)]),_:2},1032,["onClick"])]),o("td",uo,t(a.ubicacion),1),o("td",_o,t(a.infraestructura),1),o("td",mo,t(a.capacidad),1),o("td",po,t(a.enlace),1),o("td",fo,t(a.telefonos),1),o("td",go,[i(O,{onClick:H=>j(a),title:"Eliminar refugio"},{default:n(()=>[ho]),_:2},1032,["onClick"])])]))),128)),i(q,{classMsg:v.value,Msg:"No se encontraron Refugios",classIcon:"text-orange-800"},{default:n(()=>[y(s.$slots,"icon",{},()=>[xo])]),_:3},8,["classMsg"])])])])])]),i(F,{show:h.value,onClose:w},{default:n(()=>[o("div",vo,[o("p",null,[c(" Quiéres eliminar este refugio "),o("span",wo,t(u(e).refugio)+" ? ",1)])]),o("div",yo,[i(P,{onClick:V,class:"mr-4"},{default:n(()=>[c("Si, eliminalo")]),_:1}),i($,{onClick:w},{default:n(()=>[c("Cancelar")]),_:1})])]),_:1},8,["show"])]),_:3})],64))}};export{Bo as default};
